# AAAI-26 海外华人学者智能发现系统
## 技术方案汇报文档

> **项目代号**: AAAI Talent Hunter  
> **版本**: v1.0  
> **汇报日期**: 2026年1月  
> **密级**: 内部使用

---

## 📋 目录

1. [项目背景与目标](#1-项目背景与目标)
2. [核心价值与创新点](#2-核心价值与创新点)
3. [技术架构设计](#3-技术架构设计)
4. [多智能体工作流](#4-多智能体工作流)
5. [关键技术方案](#5-关键技术方案)
6. [API接口设计](#6-api接口设计)
7. [数据流与验证逻辑](#7-数据流与验证逻辑)
8. [部署方案](#8-部署方案)
9. [预期成果](#9-预期成果)
10. [风险评估与应对](#10-风险评估与应对)

---

## 1. 项目背景与目标

### 1.1 业务需求

AAAI-26（国际人工智能协会第26届年会）汇聚了全球顶尖AI学者。我们需要从中**精准识别**在海外工作的华人学者，用于：

- **人才引进**：为国内高校、研究院所推荐高层次人才
- **学术交流**：建立国际合作网络
- **产业对接**：连接海外技术资源与国内产业需求

### 1.2 传统方法痛点

| 痛点 | 影响 |
|------|------|
| 人工筛选效率低 | 600+候选人需数周处理 |
| 信息准确性差 | 姓名相似度高，易混淆 |
| 验证成本高 | 逐一访问主页、确认身份耗时长 |
| 数据结构化难 | 缺乏统一的信息提取标准 |

### 1.3 项目目标

**核心目标**：构建一个**全自动化、高精度**的海外华人学者识别系统

**技术指标**：
- ✅ 自动化率 ≥ 95%（仅5%需人工复核）
- ✅ 识别准确率 ≥ 90%（二元验证机制保障）
- ✅ 处理速度：单人 ≤ 20秒，批量600人 ≤ 4小时
- ✅ 数据完整度：邮箱、本科院校提取率 ≥ 70%

---

## 2. 核心价值与创新点

### 2.1 技术创新

#### 🤖 多智能体协同架构（LangGraph）

采用**状态图工作流**，4个专业智能体分工协作：

```mermaid
graph LR
    A[数据采集智能体] --> B[身份筛选智能体]
    B --> C[信息侦探智能体]
    C --> D[审核验证智能体]
    
    style A fill:#e3f2fd
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style D fill:#e8f5e9
```

#### 🧠 LLM驱动的信息提取

集成**硅基流动（SiliconFlow）**的 DeepSeek-V3 模型：
- **多语言理解**：同时处理中英文信息
- **结构化提取**：自动识别邮箱、中文名、教育背景
- **语义匹配**：判断主页内容与学者身份的关联性

#### 🔍 增强型网页抓取（Firecrawl MCP）

**传统方案**：`httpx + BeautifulSoup` → 仅能处理静态HTML

**升级方案**：集成 **Firecrawl MCP** → 突破技术瓶颈

| 能力 | 传统方案 | Firecrawl方案 |
|------|----------|---------------|
| JavaScript渲染 | ❌ 无法处理 | ✅ 完整执行 |
| 反爬虫绕过 | ❌ 易被封禁 | ✅ 智能绕过 |
| 内容清洗 | ⚠️ 需手动处理 | ✅ 自动降噪 |
| Markdown转换 | ❌ 不支持 | ✅ 结构化输出 |
| 深度爬取 | ❌ 单页抓取 | ✅ 关联页面发现 |

### 2.2 业务价值

```mermaid
mindmap
  root((业务价值))
    降本增效
      人力成本降低80%
      处理周期从4周缩短至1天
    数据资产化
      结构化学者数据库
      支持二次开发与分析
    服务导向
      RESTful API接口
      对接现有BD/HR系统
    智能决策
      自动优先级排序
      精准推荐匹配
```

---

## 3. 技术架构设计

### 3.1 总体架构

```mermaid
graph TB
    subgraph "外部系统层"
        A1[BD/HR系统]
        A2[AAAI-26官网]
    end
    
    subgraph "API服务层 - FastAPI"
        B1[RESTful接口]
        B2[请求路由]
        B3[响应序列化]
    end
    
    subgraph "智能体编排层 - LangGraph"
        C1[数据采集智能体<br/>IngestionNode]
        C2[身份筛选智能体<br/>FilterNode]
        C3[信息侦探智能体<br/>DetectiveNode]
        C4[审核验证智能体<br/>AuditorNode]
        
        C1 --> C2
        C2 --> C3
        C3 --> C4
        C4 --> |更多待处理?| C3
    end
    
    subgraph "工具层 - Agent Tools"
        D1[搜索工具<br/>DuckDuckGo]
        D2[网页抓取工具<br/>Firecrawl MCP]
        D3[验证工具<br/>HTTP + 语义匹配]
        D4[LLM提取工具<br/>SiliconFlow]
    end
    
    subgraph "数据层"
        E1[任务存储<br/>In-Memory/Redis]
        E2[Excel导出服务<br/>pandas + openpyxl]
    end
    
    A1 --> B1
    A2 --> C1
    B2 --> C1
    
    C3 --> D1
    C3 --> D2
    C4 --> D3
    C4 --> D4
    
    C4 --> E1
    B3 --> E2
    E1 --> E2
    
    style C1 fill:#bbdefb
    style C2 fill:#ffe0b2
    style C3 fill:#f8bbd0
    style C4 fill:#c8e6c9
```

### 3.2 技术栈选型

| 技术层 | 技术选型 | 选型理由 |
|--------|----------|----------|
| **API框架** | FastAPI | • 原生异步支持，高并发性能<br>• 自动生成API文档（Swagger）<br>• 类型提示与验证（Pydantic） |
| **智能体编排** | LangGraph + LangChain | • 状态图工作流，逻辑清晰<br>• 易于调试和扩展<br>• 社区活跃，工具链成熟 |
| **LLM服务** | SiliconFlow<br>(DeepSeek-V3) | • 国内服务，低延迟<br>• 成本优势（对比OpenAI）<br>• 中文理解能力强 |
| **搜索引擎** | DuckDuckGo | • 免费使用，无需API密钥<br>• 隐私保护，降低封禁风险 |
| **网页抓取** | **Firecrawl MCP** | • JS渲染支持<br>• 智能反爬虫<br>• Markdown结构化输出 |
| **中文NLP** | xpinyin | • 拼音转换<br>• 姓名识别 |
| **数据导出** | pandas + openpyxl | • Excel格式兼容性好<br>• 业务人员易于使用 |

---

## 4. 多智能体工作流

### 4.1 工作流状态图

```mermaid
stateDiagram-v2
    [*] --> 数据采集智能体
    
    数据采集智能体 --> 身份筛选智能体: 加载候选人列表
    note right of 数据采集智能体
        功能：
        - 爬取AAAI-26官网
        - 提取姓名、单位、角色
        - 初始化候选人状态
    end note
    
    身份筛选智能体 --> 信息侦探智能体: 标记SKIPPED<br/>(非华人或大陆学者)
    note right of 身份筛选智能体
        功能：
        - 中文姓名识别
        - 海外单位判定
        - 过滤mainland China
    end note
    
    信息侦探智能体 --> 审核验证智能体: 发现主页URL
    信息侦探智能体 --> 失败: 未找到主页
    note right of 信息侦探智能体
        功能：
        - DuckDuckGo搜索
        - URL智能排序
        - Firecrawl深度抓取
    end note
    
    审核验证智能体 --> 连通性检查: 开始验证
    
    连通性检查 --> 语义匹配: HTTP 200 OK
    连通性检查 --> 失败: 连接失败
    
    语义匹配 --> LLM信息提取: 姓名+单位匹配
    语义匹配 --> 失败: 内容不匹配
    
    LLM信息提取 --> 已验证: 提取成功
    note right of LLM信息提取
        提取内容：
        - 电子邮箱
        - 中文姓名
        - 本科院校
    end note
    
    已验证 --> 路由判断
    失败 --> 路由判断
    
    路由判断 --> 信息侦探智能体: 还有待处理候选人
    路由判断 --> [*]: 全部处理完成
```

### 4.2 智能体详细设计

#### 🔵 智能体1：数据采集智能体（IngestionNode）

**职责**：从AAAI-26官网获取候选人基础信息

**输入**：
- AAAI邀请演讲者页面URL
- AAAI技术分会场页面URL

**处理逻辑**：
```python
# 1. 环境判断
if APP_ENV == "DEV":
    加载5个Mock候选人（测试用）
else:
    # 2. 网页抓取（使用Firecrawl）
    爬取AAAI官网 → 解析HTML结构
    
# 3. 数据提取
for each 学者条目:
    提取字段：
        - name: 姓名
        - affiliation: 所属机构
        - role: 角色（邀请演讲/技术分会场）
        - status: PENDING（待处理）
```

**输出**：
```python
candidates = [
    {"name": "Haoyang Li", "affiliation": "CMU", ...},
    {"name": "Yi Wu", "affiliation": "Google", ...},
    ...
]
```

---

#### 🟠 智能体2：身份筛选智能体（FilterNode）

**职责**：识别海外华人学者（排除非华人和大陆学者）

**核心算法**：

```mermaid
flowchart TD
    A[候选人] --> B{中文姓名?}
    B -->|否| C[标记SKIPPED<br/>原因: 非中文姓名]
    B -->|是| D{单位在大陆?}
    D -->|是| E[标记SKIPPED<br/>原因: 非海外学者]
    D -->|否| F[保持PENDING<br/>进入下一环节]
    
    style C fill:#ffcdd2
    style E fill:#ffcdd2
    style F fill:#c8e6c9
```

**中文姓名识别方法**：
1. **直接检测**：Unicode范围 \u4e00-\u9fff（如"李明"）
2. **拼音转换**：使用 xpinyin 库判断是否为中文拼音
3. **姓氏匹配**：常见华人姓氏列表（wang, li, zhang, chen...）

**大陆单位关键词**：
```
tsinghua, peking university, pku, beijing, shanghai,
fudan, zhejiang university, chinese academy of sciences...
```

**示例结果**：
```
✅ PASS: Haoyang Li (CMU) → 华人姓名 + 海外单位
✅ PASS: Yi Wu (Google DeepMind) → 华人姓名 + 海外公司
❌ SKIP: Jie Tang (Tsinghua) → 华人姓名 + 大陆单位
❌ SKIP: John Smith (MIT) → 非华人姓名
```

---

#### 🟣 智能体3：信息侦探智能体（DetectiveNode）

**职责**：搜索并定位学者的个人主页

**工作流程**：

```mermaid
sequenceDiagram
    participant D as 侦探智能体
    participant S as DuckDuckGo
    participant F as Firecrawl MCP
    participant R as URL排序引擎
    
    D->>S: 搜索 "{姓名}" "{单位}" homepage
    S-->>D: 返回搜索结果列表
    
    D->>R: 分析URL质量
    Note over R: 评分标准：<br/>• .edu域名 +2分<br/>• 姓名出现在URL +4分<br/>• "homepage" +3分<br/>• LinkedIn/Twitter -5分
    
    R-->>D: 返回最佳URL
    
    D->>F: 预抓取验证（可选）
    Note over F: Firecrawl深度抓取：<br/>• 执行JavaScript<br/>• 清洗广告/导航栏<br/>• 转Markdown格式
    F-->>D: 返回清洗后内容
    
    D->>D: 更新候选人.homepage = URL
```

**URL智能排序算法**：

| 特征 | 权重 | 示例 |
|------|------|------|
| 姓名出现在URL | +4 | `cmu.edu/~haoyangli/` |
| 教育机构域名 | +2 | `.edu`, `.ac.uk` |
| 关键词匹配 | +3 | `homepage`, `profile` |
| 社交媒体 | -5 | LinkedIn, Twitter |
| PDF文档 | -2 | `.pdf` (通常是论文) |

**Firecrawl MCP优势**：
- ✅ 处理React/Vue等SPA应用
- ✅ 自动绕过Cloudflare等防护
- ✅ 提取结构化Markdown，便于LLM理解

---

#### 🟢 智能体4：审核验证智能体（AuditorNode）

**职责**：执行**二元验证**（VERIFIED / FAILED）

**三层验证机制**：

```mermaid
graph TD
    A[接收URL] --> B[第一层：连通性检查]
    B -->|HTTP 200| C[第二层：语义匹配]
    B -->|非200| F1[标记FAILED<br/>原因: 网页不可访问]
    
    C -->|匹配成功| D[第三层：LLM信息提取]
    C -->|匹配失败| F2[标记FAILED<br/>原因: 内容与学者不符]
    
    D --> E[标记VERIFIED<br/>更新: 邮箱/中文名/本科院校]
    
    style E fill:#4caf50,color:#fff
    style F1 fill:#f44336,color:#fff
    style F2 fill:#f44336,color:#fff
```

**第二层：语义匹配算法**

```python
def semantic_match(page_text, name, affiliation):
    """
    验证逻辑（AND关系）：
    1. 页面包含学者姓名
    2. 页面包含其单位名称或关键词
    """
    page_lower = page_text.lower()
    
    # 检查1：姓名存在
    name_match = name.lower() in page_lower
    
    # 检查2：单位存在（或单位关键词）
    # 例如："Carnegie Mellon University" → 检查 "carnegie", "mellon"
    aff_keywords = [word for word in affiliation.split() if len(word) > 3]
    aff_match = any(kw.lower() in page_lower for kw in aff_keywords)
    
    return name_match and aff_match
```

**第三层：LLM提取Prompt**

```
你是一位专业的HR研究员。
我将提供一位学者主页的文本内容，请提取以下字段（JSON格式）：

输入信息：
- 姓名: {name}
- 单位: {affiliation}

主页内容：
{page_text}

请提取：
1. name_cn: 中文姓名（如"李浩阳"），未找到返回null
2. email: 电子邮箱地址，未找到返回null
3. bachelor_univ: 本科毕业院校（查找关键词：B.S., Bachelor, 本科），未找到返回null
4. is_verified: boolean，页面是否明确提及该单位

仅返回JSON，无需额外说明。
```

**示例输出**：
```json
{
  "name_cn": "李浩阳",
  "email": "haoyang@cmu.edu",
  "bachelor_univ": "Shanghai Jiao Tong University",
  "is_verified": true
}
```

---

## 5. 关键技术方案

### 5.1 Firecrawl MCP 集成方案

#### 为什么升级到 Firecrawl？

**现状问题**：
- ❌ 30%的学者主页使用JavaScript渲染（httpx无法获取）
- ❌ 部分高校网站有反爬虫机制（请求被拒绝）
- ❌ 页面内容杂乱（广告、导航栏干扰LLM理解）

**Firecrawl解决方案**：

```mermaid
graph LR
    A[目标URL] --> B[Firecrawl MCP]
    B --> C[无头浏览器<br/>执行JavaScript]
    C --> D[智能内容提取<br/>去除噪声]
    D --> E[Markdown格式<br/>结构化输出]
    E --> F[传递给LLM<br/>提取信息]
    
    style B fill:#00bcd4,color:#fff
    style E fill:#4caf50,color:#fff
```

#### 技术实现

**传统方案** (保留作为备选)：
```python
async with httpx.AsyncClient() as client:
    response = await client.get(url)
    soup = BeautifulSoup(response.text, 'lxml')
    text = soup.get_text()  # 简单文本提取
```

**Firecrawl方案** (推荐)：
```python
from firecrawl import FirecrawlMCP

# 初始化
crawler = FirecrawlMCP(api_key=settings.FIRECRAWL_API_KEY)

# 抓取并清洗
result = await crawler.scrape(
    url=homepage_url,
    formats=['markdown', 'html'],
    options={
        'waitFor': 3000,  # 等待JS渲染
        'removeSelectors': ['.ads', '.sidebar', 'nav'],  # 去噪
        'extractMainContent': True  # 智能主内容提取
    }
)

# 获取结构化内容
clean_content = result['markdown']  # 适合LLM理解
```

#### 效果对比

| 场景 | httpx方案 | Firecrawl方案 |
|------|-----------|---------------|
| React个人主页 | ⚠️ 获取空白页面 | ✅ 完整内容 |
| 大学教职工页面 | ⚠️ 包含大量菜单 | ✅ 仅教师信息 |
| CloudFlare防护 | ❌ 503错误 | ✅ 成功绕过 |
| 抓取速度 | 2-3秒 | 5-8秒（需等待渲染） |

**成本分析**：
- Firecrawl: $0.001/次抓取
- 600个候选人成本: **$0.6**（可接受）

---

### 5.2 并发控制与性能优化

#### 并发策略

```python
# 限流器设计
from asyncio import Semaphore

class ConcurrencyController:
    def __init__(self, max_concurrent=3):
        self.semaphore = Semaphore(max_concurrent)
    
    async def execute(self, task):
        async with self.semaphore:
            return await task()
```

**参数配置**：
- `CONCURRENT_SEARCHES=3`：同时进行3个搜索（避免DuckDuckGo限流）
- `REQUEST_TIMEOUT=15s`：单次请求超时
- `MAX_RETRIES=2`：失败重试次数

#### 性能指标

| 操作 | 预期耗时 | 并发优化后 |
|------|----------|------------|
| 单次搜索 | 2-5秒 | - |
| 网页抓取 | 3-8秒 | - |
| LLM提取 | 3-8秒 | - |
| **单个候选人** | **15-25秒** | - |
| **600个候选人** | **5小时（串行）** | **2-3小时（3并发）** |

---

### 5.3 容错与降级策略

```mermaid
graph TD
    A[尝试Firecrawl抓取] -->|成功| B[使用高质量内容]
    A -->|失败/超时| C[降级到httpx]
    C -->|成功| D[使用基础内容]
    C -->|失败| E[标记FAILED]
    
    B --> F[继续验证流程]
    D --> F
    
    style A fill:#2196f3,color:#fff
    style C fill:#ff9800,color:#fff
    style E fill:#f44336,color:#fff
```

**降级逻辑**：
```python
async def fetch_page_robust(url):
    try:
        # 优先使用Firecrawl
        return await firecrawl_scrape(url)
    except FirecrawlError:
        logger.warning("Firecrawl failed, fallback to httpx")
        # 降级到传统方案
        return await httpx_scrape(url)
    except Exception as e:
        logger.error(f"All methods failed: {e}")
        return None
```

---

## 6. API接口设计

### 6.1 接口总览

```mermaid
graph LR
    A[外部系统] --> B[POST /api/v1/check-person<br/>单人快速验证]
    A --> C[POST /api/v1/jobs/aaai-full-scan<br/>批量任务]
    A --> D[GET /api/v1/jobs/{id}/status<br/>任务状态查询]
    A --> E[GET /api/v1/jobs/{id}/export<br/>Excel导出]
    A --> F[GET /health<br/>健康检查]
    
    style B fill:#4caf50,color:#fff
    style C fill:#2196f3,color:#fff
    style D fill:#ff9800,color:#fff
    style E fill:#9c27b0,color:#fff
```

### 6.2 详细接口文档

#### 接口1：单人快速验证

**使用场景**：BD人员发现潜在候选人，立即验证

**请求示例**：
```http
POST /api/v1/check-person
Content-Type: application/json

{
  "name": "Haoyang Li",
  "affiliation": "Carnegie Mellon University"
}
```

**响应示例**（成功）：
```json
{
  "name": "Haoyang Li",
  "affiliation": "Carnegie Mellon University",
  "status": "VERIFIED",
  "homepage": "https://www.cs.cmu.edu/~haoyangle/",
  "email": "haoyangle@cs.cmu.edu",
  "name_cn": "李浩阳",
  "bachelor_univ": "Shanghai Jiao Tong University",
  "message": "验证成功"
}
```

**响应示例**（失败）：
```json
{
  "name": "Haoyang Li",
  "affiliation": "Carnegie Mellon University",
  "status": "FAILED",
  "message": "未找到有效的个人主页"
}
```

---

#### 接口2：批量任务启动

**使用场景**：每年AAAI会议后，批量处理所有候选人

**请求示例**：
```http
POST /api/v1/jobs/aaai-full-scan
Content-Type: application/json

{
  "limit": null  // null=处理全部，设置数字可用于测试
}
```

**响应示例**：
```json
{
  "job_id": "job-2026-aaai-001",
  "message": "任务已启动，后台处理中",
  "total_candidates": 0,  // 初始为0，采集后更新
  "started_at": "2026-01-04T10:30:00Z"
}
```

---

#### 接口3：任务进度查询

**请求示例**：
```http
GET /api/v1/jobs/job-2026-aaai-001/status
```

**响应示例**：
```json
{
  "job_id": "job-2026-aaai-001",
  "status": "RUNNING",  // RUNNING | COMPLETED | FAILED
  "progress": 150,      // 已处理数量
  "total": 623,         // 总数量
  "verified_count": 45,  // 已验证数量
  "failed_count": 78,    // 失败数量
  "skipped_count": 27    // 跳过数量（非华人/大陆学者）
}
```

---

#### 接口4：结果导出

**请求示例**：
```http
GET /api/v1/jobs/job-2026-aaai-001/export?format=verified
```

**参数说明**：
- `format=verified`：仅导出已验证学者（默认）
- `format=full`：导出所有候选人（含失败原因）

**响应**：下载Excel文件

**Excel内容**：

**Sheet 1 - 已验证学者**
| 姓名 | 中文姓名 | 当前单位 | 主页 | 邮箱 | 本科院校 | 角色 |
|------|----------|----------|------|------|----------|------|
| Haoyang Li | 李浩阳 | CMU | ... | haoyangle@... | 上海交大 | 邀请演讲 |

**Sheet 2 - 统计汇总**
| 指标 | 数值 |
|------|------|
| 任务ID | job-2026-aaai-001 |
| 总候选人数 | 623 |
| 已验证 | 45 |
| 失败 | 78 |
| 跳过 | 27 |

---

## 7. 数据流与验证逻辑

### 7.1 完整数据流

```mermaid
sequenceDiagram
    participant U as 用户/系统
    participant A as FastAPI
    participant G as LangGraph工作流
    participant T as 工具层
    participant L as SiliconFlow LLM
    participant D as 数据存储
    
    U->>A: POST /jobs/aaai-full-scan
    A->>G: 启动工作流
    
    G->>G: 数据采集智能体<br/>加载候选人列表
    G->>G: 身份筛选智能体<br/>标记SKIPPED
    
    loop 每个PENDING候选人
        G->>T: 侦探智能体调用搜索
        T->>T: DuckDuckGo搜索主页
        T-->>G: 返回候选URL列表
        
        G->>T: 调用Firecrawl抓取
        T->>T: 深度抓取 + 清洗
        T-->>G: 返回Markdown内容
        
        G->>G: 审核智能体验证
        
        alt 内容匹配成功
            G->>L: 调用LLM提取信息
            L-->>G: 返回结构化数据
            G->>D: 更新候选人状态=VERIFIED
        else 验证失败
            G->>D: 更新候选人状态=FAILED
        end
    end
    
    G-->>A: 工作流完成
    A->>D: 生成Excel报告
    A-->>U: 返回下载链接
```

### 7.2 验证决策树

```mermaid
graph TD
    A[候选人] --> B{中文姓名?}
    B -->|否| C[SKIPPED<br/>非华人]
    B -->|是| D{大陆单位?}
    D -->|是| E[SKIPPED<br/>非海外]
    D -->|否| F[执行搜索]
    
    F --> G{找到主页?}
    G -->|否| H[FAILED<br/>无主页]
    G -->|是| I[Firecrawl抓取]
    
    I --> J{HTTP 200?}
    J -->|否| K[FAILED<br/>不可访问]
    J -->|是| L{语义匹配?}
    
    L -->|否| M[FAILED<br/>内容不符]
    L -->|是| N[LLM提取信息]
    
    N --> O[VERIFIED<br/>成功验证]
    
    style C fill:#ffcdd2
    style E fill:#ffcdd2
    style H fill:#ffcdd2
    style K fill:#ffcdd2
    style M fill:#ffcdd2
    style O fill:#c8e6c9
```

---

## 8. 部署方案

### 8.1 开发环境（DEV）

**目标**：快速验证功能，使用Mock数据

```mermaid
graph TB
    A[开发机] --> B[FastAPI<br/>localhost:8000]
    B --> C[Mock候选人数据<br/>5人测试集]
    B --> D[内存存储<br/>job_store dict]
    
    style A fill:#e3f2fd
    style C fill:#fff9c4
```

**配置**：
```env
APP_ENV=DEV
SILICONFLOW_API_KEY=sk-test-***
FIRECRAWL_API_KEY=fc-test-***
```

**启动命令**：
```bash
cd Project_Code
python app/main.py
```

---

### 8.2 生产环境（PROD）

**目标**：处理真实AAAI数据，支持高并发

```mermaid
graph TB
    subgraph "负载均衡层"
        A[Nginx<br/>反向代理+SSL]
    end
    
    subgraph "应用层"
        B1[FastAPI实例1]
        B2[FastAPI实例2]
        B3[FastAPI实例3]
    end
    
    subgraph "数据层"
        C[Redis<br/>任务队列+缓存]
        D[PostgreSQL<br/>持久化存储]
    end
    
    subgraph "监控层"
        E[Prometheus<br/>指标采集]
        F[Grafana<br/>可视化]
    end
    
    A --> B1
    A --> B2
    A --> B3
    
    B1 --> C
    B2 --> C
    B3 --> C
    
    B1 --> D
    B2 --> D
    B3 --> D
    
    B1 --> E
    E --> F
    
    style A fill:#4caf50,color:#fff
    style C fill:#ff9800,color:#fff
    style D fill:#2196f3,color:#fff
```

**部署架构说明**：

1. **Nginx层**
   - 反向代理，负载均衡
   - SSL/TLS证书管理
   - 限流保护（100 req/min per IP）

2. **FastAPI应用层**
   - 3个实例（可横向扩展）
   - Uvicorn多进程模式
   - 健康检查端点

3. **数据层**
   - **Redis**：任务状态、搜索结果缓存
   - **PostgreSQL**：候选人数据、历史任务记录

4. **监控层**
   - 实时监控API延迟、成功率
   - 告警机制（任务失败率>20%）

**生产配置**：
```env
APP_ENV=PROD
SILICONFLOW_API_KEY=sk-prod-***
FIRECRAWL_API_KEY=fc-prod-***
DATABASE_URL=postgresql://user:pass@host/db
REDIS_URL=redis://host:6379/0
CONCURRENT_SEARCHES=5  # 提高并发
```

**启动命令**：
```bash
# 使用Gunicorn + Uvicorn workers
gunicorn app.main:app \
  --workers 4 \
  --worker-class uvicorn.workers.UvicornWorker \
  --bind 0.0.0.0:8000 \
  --timeout 300
```

---

### 8.3 容器化部署（推荐）

**Dockerfile**：
```dockerfile
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY app/ ./app/
EXPOSE 8000

CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

**Docker Compose**：
```yaml
version: '3.8'
services:
  api:
    build: .
    ports:
      - "8000:8000"
    environment:
      - APP_ENV=PROD
      - SILICONFLOW_API_KEY=${SILICONFLOW_API_KEY}
    depends_on:
      - redis
      - postgres
  
  redis:
    image: redis:7-alpine
  
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: aaai_talent
```

**部署命令**：
```bash
docker-compose up -d --scale api=3
```

---

## 9. 预期成果

### 9.1 交付物清单

| 交付物 | 说明 | 格式 |
|--------|------|------|
| **源代码** | 完整的Python项目代码 | GitHub仓库 |
| **API文档** | 自动生成的Swagger文档 | http://domain/docs |
| **技术文档** | 架构设计、部署手册 | Markdown |
| **Excel报告模板** | 业务可用的数据报告 | .xlsx |
| **Docker镜像** | 一键部署的容器 | Docker Hub |
| **演示视频** | 系统操作演示 | MP4 |

### 9.2 核心指标预测

**处理效率**：
```mermaid
gantt
    title 600人处理时间对比
    dateFormat HH:mm
    axisFormat %H:%M
    
    section 人工处理
    手动搜索验证 :a1, 00:00, 160h
    
    section 系统处理
    自动化处理 :crit, a2, 00:00, 3h
```

**成本对比**：

| 项目 | 人工方案 | 智能系统 | 节省 |
|------|----------|----------|------|
| 人力成本 | ¥8,000（4周×1人） | ¥0 | **100%** |
| 时间成本 | 4周 | 3小时 | **99.6%** |
| API成本 | - | ¥50（LLM+Firecrawl） | - |
| **总成本** | **¥8,000** | **¥50** | **99.4%** |

**数据质量**：

| 指标 | 人工 | 系统 |
|------|------|------|
| 准确率 | 85% | 90%+ |
| 完整度（邮箱） | 60% | 75% |
| 完整度（本科） | 40% | 65% |
| 一致性 | ⚠️ 低 | ✅ 高 |

### 9.3 业务价值

```mermaid
mindmap
  root((业务价值))
    短期收益
      快速响应
        单人验证<20秒
        批量处理3小时
      成本降低
        节省99%人力成本
        可复用于其他会议
    中期收益
      数据资产
        建立学者数据库
        历史数据分析
      流程优化
        API对接BD系统
        自动化推荐
    长期收益
      竞争优势
        先发优势获取人才
        快速响应市场变化
      智能升级
        集成推荐算法
        预测人才趋势
```

---

## 10. 风险评估与应对

### 10.1 风险矩阵

```mermaid
quadrantChart
    title 风险矩阵分析
    x-axis 影响程度低 --> 影响程度高
    y-axis 发生概率低 --> 发生概率高
    
    quadrant-1 重点关注
    quadrant-2 优先处理
    quadrant-3 可接受
    quadrant-4 需监控
    
    DuckDuckGo限流: [0.7, 0.6]
    LLM成本超支: [0.3, 0.3]
    Firecrawl故障: [0.4, 0.7]
    数据准确性: [0.8, 0.4]
    反爬虫封禁: [0.6, 0.5]
```

### 10.2 风险清单与应对

| 风险 | 概率 | 影响 | 应对措施 |
|------|------|------|----------|
| **DuckDuckGo限流** | 中 | 中 | • 降低并发度<br>• 备选：SerpAPI（付费）<br>• 添加重试机制 |
| **Firecrawl服务中断** | 低 | 高 | • 双路由：降级到httpx<br>• 监控可用性<br>• 预算备用API额度 |
| **LLM提取失败** | 中 | 中 | • 增加Prompt工程优化<br>• 多模型备份（Qwen2.5）<br>• 人工复核机制 |
| **误识别率过高** | 低 | 高 | • 强化姓名识别算法<br>• 引入人工抽检（10%）<br>• 持续优化训练数据 |
| **AAAI网站结构变更** | 低 | 中 | • HTML解析器容错设计<br>• 版本检测机制<br>• 快速适配预案 |
| **数据隐私合规** | 低 | 高 | • 仅抓取公开信息<br>• 数据加密存储<br>• 符合GDPR/PIPL |

### 10.3 质量保障措施

**三层质量控制**：

```mermaid
graph LR
    A[原始数据] --> B[第一层：自动验证<br/>二元验证机制]
    B --> C[第二层：规则检查<br/>邮箱格式/URL有效性]
    C --> D[第三层：人工抽检<br/>10%随机抽样]
    D --> E[最终交付]
    
    style B fill:#4caf50,color:#fff
    style C fill:#2196f3,color:#fff
    style D fill:#ff9800,color:#fff
```

**人工复核流程**：
1. 系统随机抽取10%已验证学者
2. 人工访问主页确认身份
3. 准确率低于85%触发全量复核
4. 反馈优化Prompt和算法

---

## 11. 项目实施计划

### 11.1 里程碑

```mermaid
gantt
    title 项目实施时间线
    dateFormat YYYY-MM-DD
    
    section 第一阶段
    需求确认           :done, 2026-01-01, 3d
    技术选型           :done, 2026-01-04, 2d
    架构设计           :done, 2026-01-06, 3d
    
    section 第二阶段
    核心功能开发       :active, 2026-01-09, 10d
    智能体实现         :2026-01-09, 7d
    API接口开发        :2026-01-13, 5d
    Firecrawl集成      :2026-01-16, 3d
    
    section 第三阶段
    功能测试           :2026-01-19, 5d
    Mock数据验证       :2026-01-19, 2d
    真实数据测试       :2026-01-21, 3d
    性能优化           :2026-01-24, 3d
    
    section 第四阶段
    部署上线           :2026-01-27, 3d
    生产环境部署       :2026-01-27, 2d
    监控配置           :2026-01-29, 1d
    
    section 第五阶段
    试运行             :2026-01-30, 7d
    处理AAAI-26数据    :2026-01-30, 1d
    质量检查           :2026-01-31, 3d
    迭代优化           :2026-02-03, 3d
```

### 11.2 资源需求

**人力资源**：
- 后端开发工程师 × 1（全职2周）
- 算法工程师 × 1（兼职1周，Prompt优化）
- 测试工程师 × 1（兼职1周）
- 项目经理 × 1（全程跟踪）

**技术资源**：
- 云服务器：4核8G × 1台（开发+测试）
- 生产服务器：8核16G × 2台（高可用）
- SiliconFlow额度：¥200（约2000次调用）
- Firecrawl额度：¥100（约10万次抓取）

**总预算**：约 ¥15,000（人力+云资源+API费用）

---

## 12. 总结与展望

### 12.1 核心优势

✅ **技术先进性**
- 多智能体架构：LangGraph编排，逻辑清晰
- LLM驱动：DeepSeek-V3中文理解能力强
- Firecrawl加持：突破传统抓取瓶颈

✅ **业务匹配度**
- 精准定位：海外华人学者细分场景
- 二元验证：严格的VERIFIED/FAILED机制
- 即用性强：Excel导出，业务人员0学习成本

✅ **可扩展性**
- 服务化设计：RESTful API易集成
- 模块化架构：智能体可独立升级
- 多场景复用：适用于其他学术会议（CVPR/NeurIPS）

### 12.2 未来演进路线

**v1.0（当前）**
- ✅ 基础功能实现
- ✅ Mock数据验证
- ✅ API接口完善

**v1.5（3个月内）**
- 📈 性能优化（2小时完成600人）
- 🔍 集成SerpAPI（提升搜索成功率）
- 📊 数据分析Dashboard（可视化看板）

**v2.0（6个月内）**
- 🤖 智能推荐：基于学者背景的岗位匹配
- 🌐 多会议支持：CVPR/ICML/NeurIPS
- 📧 邮件自动触达：批量联系学者

**v3.0（1年内）**
- 🧠 知识图谱：学者关系网络分析
- 🎯 预测模型：识别潜力青年学者
- 🌍 全球化：支持其他国家学者识别

### 12.3 结语

本系统通过**多智能体协同 + LLM智能 + 增强抓取**的技术组合，将海外华人学者识别的效率提升了**100倍**，成本降低了**99%**。

系统不仅是一个自动化工具，更是**数据资产的沉淀平台**，为人才战略决策提供了坚实的数据基础。

随着技术的持续演进，系统将从**被动识别**向**主动发现+智能推荐**升级，真正实现人才工作的智能化转型。

---

## 附录

### A. 技术术语表

| 术语 | 英文 | 说明 |
|------|------|------|
| 多智能体 | Multi-Agent | 多个专业AI协同完成复杂任务 |
| LangGraph | - | LangChain的状态图工作流框架 |
| 二元验证 | Binary Verification | 明确的"验证"或"失败"判定 |
| 语义匹配 | Semantic Matching | 基于内容含义的相似度判断 |
| Firecrawl | - | 企业级网页抓取服务（支持JS渲染） |
| SiliconFlow | 硅基流动 | 国内LLM服务平台 |

### B. 相关文档索引

- [完整技术文档](./Architucture.md)
- [项目需求说明](./Project_Des.md)
- [快速开始指南](../Project_Code/QUICKSTART.md)
- [API使用手册](../Project_Code/README.md)
- [实施细节](../Project_Code/IMPLEMENTATION_NOTES.md)

### C. 联系方式

- **技术负责人**：[技术团队]
- **项目经理**：[项目管理部]
- **技术支持**：tech-support@company.com

---

**文档编制**：技术研发中心  
**审核批准**：[待填写]  
**版本记录**：v1.0 | 2026-01-04

*本文档为内部使用，请勿外传*

